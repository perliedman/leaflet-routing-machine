/*! leaflet-routing-machine - v1.0.0 - 2014-10-03 */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),(b.L||(b.L={})).Routing=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(a,b,c,d){L.setOptions(this,d),this._elem=a,this._resultFn=d.resultFn?L.Util.bind(d.resultFn,d.resultContext):null,this._autocomplete=d.autocompleteFn?L.Util.bind(d.autocompleteFn,d.autocompleteContext):null,this._selectFn=L.Util.bind(b,c),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var a=this._elem.getBoundingClientRect();this._container.parentElement||(this._container.style.left=a.left+"px",this._container.style.top=a.bottom+"px",this._container.style.width=a.right-a.left+"px",document.body.appendChild(this._container)),L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(a){var b,c,d,e;for(delete this._selection,this._results=a;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(b=0;b<a.length;b++)c=L.DomUtil.create("tr","",this._resultTable),c.setAttribute("data-result-index",b),d=L.DomUtil.create("td","",c),e=document.createTextNode(a[b].name),d.appendChild(e),L.DomEvent.addListener(d,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(d,"click",this._resultSelected(a[b]),this);b||(c=L.DomUtil.create("tr","",this._resultTable),d=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",c),d.innerHTML=this.options.noResultsMessage),this._open(),a.length>0&&this._select(1)},_resultSelected:function(a){return L.bind(function(){this.close(),this._elem.value=a.name,this._lastCompletedText=a.name,this._selectFn(a)},this)},_keyPressed:function(a){var b;return this._isOpen&&13===a.keyCode&&this._selection?(b=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[b])(),void L.DomEvent.preventDefault(a)):13===a.keyCode?void this._complete(this._resultFn,!0):this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect()},_select:function(a){var b=this._selection;b&&(L.DomUtil.removeClass(b.firstChild,"leaflet-routing-geocoder-selected"),b=b[a>0?"nextSibling":"previousSibling"]),b||(b=this._resultTable[a>0?"firstChild":"lastChild"]),b&&(L.DomUtil.addClass(b.firstChild,"leaflet-routing-geocoder-selected"),this._selection=b)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(a){if(this._isOpen)switch(a.keyCode){case 38:return this._select(-1),void L.DomEvent.preventDefault(a);case 40:return this._select(1),void L.DomEvent.preventDefault(a)}},_complete:function(a,b){function c(a){this._lastCompletedText=d,b&&1===a.length?this._resultSelected(a[0])():this._setResults(a)}var d=this._elem.value;d&&(d!==this._lastCompletedText?a(d,c,this):b&&c.call(this,this._results))}})}()},{}],2:[function(a,b){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Itinerary")),d.extend(d.Routing,a("./L.Routing.Line")),d.extend(d.Routing,a("./L.Routing.Plan")),d.extend(d.Routing,a("./L.Routing.OSRM")),d.Routing.Control=d.Routing.Itinerary.extend({options:{fitSelectedRoutes:!0,routeLine:function(a,b){return d.Routing.line(a,b)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect"},initialize:function(a){d.Util.setOptions(this,a),this._router=this.options.router||new d.Routing.OSRM(a),this._plan=this.options.plan||d.Routing.plan(this.options.waypoints,a),d.Routing.Itinerary.prototype.initialize.call(this,a),this.on("routeselected",this._routeSelected,this),this._plan.on("waypointschanged",this._onWaypointsChanged,this),a.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onAdd:function(a){var b=d.Routing.Itinerary.prototype.onAdd.call(this,a);return this._map=a,this._map.addLayer(this._plan),this._plan.options.geocoder&&b.insertBefore(this._plan.createGeocoders(),b.firstChild),b},onRemove:function(a){return this._line&&a.removeLayer(this._line),a.removeLayer(this._plan),d.Routing.Itinerary.prototype.onRemove.call(this,a)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(a){return this._plan.setWaypoints(a),this},spliceWaypoints:function(){var a=this._plan.spliceWaypoints.apply(this._plan,arguments);return a},getPlan:function(){return this._plan},_routeSelected:function(a){var b=a.route;this._clearLine(),this._line=this.options.routeLine(b,d.extend({extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line),this.options.fitSelectedRoutes&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(b.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_hookEvents:function(a){a.on("linetouched",function(a){this._plan.dragNewWaypoint(a)},this)},_onWaypointsChanged:function(a){this.options.autoRoute&&this.route({}),this.fire("waypointschanged",{waypoints:a.waypoints})},_setupRouteDragging:function(){var a,b,c=0;this._plan.on("waypointdragstart",function(){a=this.options.fitSelectedRoutes,b=this.options.waypointMode,this.options.fitSelectedRoutes=!1,this.options.waypointMode="connect"},this),this._plan.on("waypointdrag",d.bind(function(a){var b=(new Date).getTime();b-c>=this.options.routeDragInterval&&(this.route({waypoints:a.waypoints,geometryOnly:!0}),c=b)},this)),this._plan.on("waypointdragend",function(){this.options.fitSelectedRoutes=a,this.options.waypointMode=b,this.route()},this)},route:function(a){var b,c=(new Date).getTime();a=a||{},this._lastRequestTimestamp=c,this._plan.isReady()&&(b=a&&a.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:b}),this._router.route(b,function(d,e){if(c===this._lastRequestTimestamp){if(this._clearLine(),this._clearAlts(),d)return void this.fire("routingerror",{error:d});a.geometryOnly?this._routeSelected({route:e[0]}):(this.fire("routesfound",{waypoints:b,routes:e}),this.setAlternatives(e))}},this,a))},_clearLine:function(){this._line&&(this._map.removeLayer(this._line),delete this._line)}}),d.Routing.control=function(a){return new d.Routing.Control(a)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Itinerary":4,"./L.Routing.Line":6,"./L.Routing.OSRM":7,"./L.Routing.Plan":8}],3:[function(a,b){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.Formatter=c.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mÃ­n",seconds:"s"},roundingSensitivity:1,distanceTemplate:"{value} {unit}"},statics:{DIR:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest"}},initialize:function(a){c.setOptions(this,a)},formatDistance:function(a){var b,d,e=this.options.unitNames;return"imperial"===this.options.units?(a/=1.609344,d=a>=1e3?{value:this._round(a)/1e3,unit:e.miles}:{value:this._round(a/1.76),unit:e.yards}):(b=this._round(a),d={value:b>=1e3?b/1e3:b,unit:b>=1e3?e.kilometers:e.meters}),c.Util.template(this.options.distanceTemplate,d)},_round:function(a){var b=Math.pow(10,(Math.floor(a/this.options.roundingSensitivity)+"").length-1),c=Math.floor(a/b),d=c>5?b:b/2;return Math.round(a/d)*d},formatTime:function(a){return a>86400?Math.round(a/3600)+" h":a>3600?Math.floor(a/3600)+" h "+Math.round(a%3600/60)+" min":a>300?Math.round(a/60)+" min":a>60?Math.floor(a/60)+" min"+(a%60!==0?" "+a%60+" s":""):a+" s"},formatInstruction:function(a,b){return void 0!==a.type?c.Util.template(this._getInstructionTemplate(a,b),c.extend({exit:this._formatOrder(a.exit),dir:c.Routing.Formatter.DIR[a.direction]},a)):a.text},getIconName:function(a,b){switch(a.type){case"Straight":return 0===b?"depart":"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"slight-left";case"WaypointReached":return"arrive";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}},_getInstructionTemplate:function(a,b){switch(a.type){case"Straight":return(0===b?"Head":"Continue")+" {dir}"+(a.road?" on {road}":"");case"SlightRight":return"Slight right"+(a.road?" onto {road}":"");case"Right":return"Right"+(a.road?" onto {road}":"");case"SharpRight":return"Sharp right"+(a.road?" onto {road}":"");case"TurnAround":return"Turn around";case"SharpLeft":return"Sharp left"+(a.road?" onto {road}":"");case"Left":return"Left"+(a.road?" onto {road}":"");case"SlightLeft":return"Slight left"+(a.road?" onto {road}":"");case"WaypointReached":return"Waypoint reached";case"Roundabout":return"Take the {exit} exit in the roundabout";case"DestinationReached":return"Destination reached"}},_formatOrder:function(a){var b=a%10-1,c=["st","nd","rd"];return c[b]?a+c[b]:a+"th"}}),b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Formatter")),d.extend(d.Routing,a("./L.Routing.ItineraryBuilder")),d.Routing.Itinerary=d.Control.extend({includes:d.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",show:!0},initialize:function(a){d.setOptions(this,a),this._formatter=this.options.formatter||new d.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new d.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(){return this._container=d.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),d.DomEvent.disableClickPropagation(this._container),d.DomEvent.addListener(this._container,"mousewheel",function(a){d.DomEvent.stopPropagation(a)}),this._container},onRemove:function(){},createAlternativesContainer:function(){return d.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(a){var b,c,d;for(this._clearAlts(),this._routes=a,b=0;b<this._routes.length;b++)c=this._routes[b],d=this._createAlternative(c,b),this._altContainer.appendChild(d),this._altElements.push(d);return this.fire("routeselected",{route:this._routes[0]}),this},show:function(){d.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){d.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_createAlternative:function(a,b){var c=d.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(b>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:""));return c.innerHTML=d.Util.template(this.options.summaryTemplate,{name:a.name,distance:this._formatter.formatDistance(a.summary.totalDistance),time:this._formatter.formatTime(a.summary.totalTime)}),d.DomEvent.addListener(c,"click",this._onAltClicked,this),c.appendChild(this._createItineraryContainer(a)),c},_clearAlts:function(){for(var a=this._altContainer;a&&a.firstChild;)a.removeChild(a.firstChild);this._altElements=[]},_createItineraryContainer:function(a){var b,c,d,e,f,g,h=this._itineraryBuilder.createContainer(),i=this._itineraryBuilder.createStepsContainer();for(h.appendChild(i),b=0;b<a.instructions.length;b++)c=a.instructions[b],f=this._formatter.formatInstruction(c,b),e=this._formatter.formatDistance(c.distance),g=this._formatter.getIconName(c,b),d=this._itineraryBuilder.createStep(f,e,g,i),this._addRowListeners(d,a.coordinates[c.index]);return h},_addRowListeners:function(a,b){var c,e=this;d.DomEvent.addListener(a,"mouseover",function(){c=d.circleMarker(b,e.options.pointMarkerStyle).addTo(e._map)}),d.DomEvent.addListener(a,"mouseout",function(){c&&(e._map.removeLayer(c),c=null)}),d.DomEvent.addListener(a,"click",function(a){e._map.panTo(b),d.DomEvent.stopPropagation(a)})},_onAltClicked:function(a){var b,c,e,f,g;for(b=a.target||window.event.srcElement;!d.DomUtil.hasClass(b,"leaflet-routing-alt");)b=b.parentElement;if(d.DomUtil.hasClass(b,"leaflet-routing-alt-minimized"))for(c=0;c<this._altElements.length;c++)e=this._altElements[c],f=b===e,g=f?"removeClass":"addClass",d.DomUtil[g](e,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&d.DomUtil[g](e,this.options.minimizedClassName),f?this.fire("routeselected",{route:this._routes[c]}):e.scrollTop=0;d.DomEvent.stop(a)}}),d.Routing.itinerary=function(a){return new d.Routing.Itinerary(a)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Formatter":3,"./L.Routing.ItineraryBuilder":5}],5:[function(a,b){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.ItineraryBuilder=c.Class.extend({options:{containerClassName:""},initialize:function(a){c.setOptions(this,a)},createContainer:function(){return c.DomUtil.create("table",this.options.containerClassName)},createStepsContainer:function(){return c.DomUtil.create("tbody","")},createStep:function(a,b,d,e){var f,g,h=c.DomUtil.create("tr","",e);return g=c.DomUtil.create("td","",h),f=c.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+d,g),g.appendChild(f),g=c.DomUtil.create("td","",h),g.appendChild(document.createTextNode(a)),g=c.DomUtil.create("td","",h),g.appendChild(document.createTextNode(b)),h}}),b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(a,b){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.Line=c.LayerGroup.extend({includes:c.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(a,b){c.setOptions(this,b),c.LayerGroup.prototype.initialize.call(this,b),this._route=a,this._wpIndices=a.waypointIndices||this._findWaypointIndices(),this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(a.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(a){return a.addLayer(this),this},getBounds:function(){return c.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var a,b=this._route.inputWaypoints,c=[];for(a=0;a<b.length;a++)c.push(this._findClosestRoutePoint(b[a].latLng));return c},_findClosestRoutePoint:function(a){var b,c,d,e=Number.MAX_VALUE;for(c=this._route.coordinates.length-1;c>=0;c--)d=a.distanceTo(this._route.coordinates[c]),e>d&&(b=c,e=d);return b},_extendToWaypoints:function(){var a,b,d,e=this._route.inputWaypoints;for(a=0;a<e.length;a++)b=e[a].latLng,d=c.latLng(this._route.coordinates[this._wpIndices[a]]),b.distanceTo(d)>this.options.missingRouteTolerance&&this._addSegment([b,d],this.options.missingRouteStyles)},_addSegment:function(a,b,d){var e,f;for(e=0;e<b.length;e++)f=c.polyline(a,b[e]),this.addLayer(f),d&&f.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(a){for(var b=this._wpIndices.length-1;b>=0&&this._wpIndices[b]>a;)b--;return b},_onLineTouched:function(a){var b=this._findNearestWpBefore(this._findClosestRoutePoint(a.latlng));this.fire("linetouched",{afterIndex:b,latlng:a.latlng})}}),c.Routing.line=function(a,b){return new c.Routing.Line(a,b)},b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing._jsonpCallbackId=0,c.Routing._jsonp=function(a,b,d,e){var f,g="_l_routing_machine_"+c.Routing._jsonpCallbackId++;a+="&"+e+"="+g,window[g]=c.Util.bind(b,d),f=document.createElement("script"),f.type="text/javascript",f.src=a,f.id=g,document.getElementsByTagName("head")[0].appendChild(f)},c.Routing.OSRM=c.Class.extend({options:{serviceUrl:"//router.project-osrm.org/viaroute",timeout:3e4},initialize:function(a){c.Util.setOptions(this,a),this._hints={locations:{}}},route:function(a,b,d,e){var f=this._buildRouteUrl(a,e),g=!1,h=setTimeout(function(){g=!0,b.call(d||b,{status:-1,message:"OSRM request timed out."})},this.options.timeout);return c.Routing._jsonp(f,function(c){clearTimeout(h),g||this._routeDone(c,a,b,d)},this,"jsonp"),this},_routeDone:function(a,b,c,d){var e,f,g,h;if(d=d||c,0!==a.status)return void c.call(d,{status:a.status,message:a.status_message});if(e=this._decode(a.route_geometry,6),g=this._toWaypoints(a.via_points),f=[{name:a.route_name.join(", "),coordinates:e,instructions:a.route_instructions?this._convertInstructions(a.route_instructions):[],summary:a.route_summary?this._convertSummary(a.route_summary):[],inputWaypoints:b,waypoints:g,waypointIndices:this._clampIndices(a.via_indices,e)}],a.alternative_geometries)for(h=0;h<a.alternative_geometries.length;h++)e=this._decode(a.alternative_geometries[h],6),f.push({name:a.alternative_names[h].join(", "),coordinates:e,instructions:a.alternative_instructions[h]?this._convertInstructions(a.alternative_instructions[h]):[],summary:a.alternative_summaries[h]?this._convertSummary(a.alternative_summaries[h]):[],inputWaypoints:b,waypoints:g,waypointIndices:this._clampIndices(1===a.alternative_geometries.length?a.alternative_indices:a.alternative_indices[h],e)});this._saveHintData(a,b),c.call(d,null,f)},_toWaypoints:function(a){var b,d=[];for(b=0;b<a.length;b++)d.push({latLng:c.latLng(a[b])});return d},_buildRouteUrl:function(a,b){for(var c,d,e,f,g=[],h=0;h<a.length;h++)e=this._locationKey(a[h].latLng),g.push("loc="+e),f=this._hints.locations[e],f&&g.push("hint="+f);return d=c=!(b&&b.geometryOnly),this.options.serviceUrl+"?instructions="+c+"&alt="+d+"&"+g.join("&")+(void 0!==this._hints.checksum?"&checksum="+this._hints.checksum:"")},_locationKey:function(a){return a.lat+","+a.lng},_saveHintData:function(a,b){var c,d=a.hint_data;this._hints={checksum:d.checksum,locations:{}};for(var e=d.locations.length-1;e>=0;e--)c=b[e].latLng,this._hints.locations[this._locationKey(c)]=d.locations[e]},_decode:function(a,b){var c=a.length,d=0,e=0,f=0,g=[];for(b=Math.pow(10,-b);c>d;){var h,i=0,j=0;do h=a.charCodeAt(d++)-63,j|=(31&h)<<i,i+=5;while(h>=32);var k=1&j?~(j>>1):j>>1;e+=k,i=0,j=0;do h=a.charCodeAt(d++)-63,j|=(31&h)<<i,i+=5;while(h>=32);var l=1&j?~(j>>1):j>>1;f+=l,g.push([e*b,f*b])}return g},_convertSummary:function(a){return{totalDistance:a.total_distance,totalTime:a.total_time}},_convertInstructions:function(a){var b,c,d,e,f=[];for(b=0;b<a.length;b++)c=a[b],d=this._drivingDirectionType(c[0]),e=c[0].split("-"),d&&f.push({type:d,distance:c[2],time:c[4],road:c[1],direction:c[6],exit:e.length>1?e[1]:void 0,index:c[3]});return f},_drivingDirectionType:function(a){switch(parseInt(a,10)){case 1:return"Straight";case 2:return"SlightRight";case 3:return"Right";case 4:return"SharpRight";case 5:return"TurnAround";case 6:return"SharpLeft";case 7:return"Left";case 8:return"SlightRight";case 9:return"WaypointReached";case 10:return"Straight";case 11:case 12:return"Roundabout";case 15:return"DestinationReached";default:return null}},_clampIndices:function(a,b){var c,d=b.length-1;for(c=0;c<a.length;c++)a[c]=Math.min(d,Math.max(a[c],0))}}),c.Routing.osrm=function(a){return new c.Routing.OSRM(a)},b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null,e=d.Class.extend({initialize:function(a,b){this.latLng=a,this.name=b}});d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Autocomplete")),d.Routing.Plan=d.Class.extend({includes:d.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,addWaypoints:!0,maxGeocoderTolerance:200,autocompleteOptions:{},geocodersClassName:"",geocoderClassName:"",geocoderPlaceholder:function(a,b){return 0===a?"Start":b-1>a?"Via "+a:"End"},geocoderClass:function(){return""},createGeocoder:function(){var a=d.DomUtil.create("input","");return{container:a,input:a}},waypointNameFallback:function(a){var b=a.lat<0?"S":"N",c=a.lng<0?"W":"E",d=(Math.round(1e4*Math.abs(a.lat))/1e4).toString(),e=(Math.round(1e4*Math.abs(a.lng))/1e4).toString();return b+d+", "+c+e}},initialize:function(a,b){d.Util.setOptions(this,b),this._waypoints=[],this.setWaypoints(a)},isReady:function(){var a;for(a=0;a<this._waypoints.length;a++)if(!this._waypoints[a].latLng)return!1;return!0},getWaypoints:function(){var a,b=[];for(a=0;a<this._waypoints.length;a++)b.push(this._waypoints[a]);return b},setWaypoints:function(a){var b=[0,this._waypoints.length].concat(a);return this.spliceWaypoints.apply(this,b),this},spliceWaypoints:function(){var a,b,c=[arguments[0],arguments[1]];for(a=2;a<arguments.length;a++)c.push(arguments[a]&&arguments[a].hasOwnProperty("latLng")?arguments[a]:new e(arguments[a]));for([].splice.apply(this._waypoints,c);this._waypoints.length<2;)b=new e,this._waypoints.push(b),c.push(b);this._updateMarkers(),this._fireChanged.apply(this,c)},onAdd:function(a){this._map=a,this._updateMarkers()},onRemove:function(){var a;if(this._removeMarkers(),this._newWp)for(a=0;a<this._newWp.lines.length;a++)this._map.removeLayer(this._newWp.lines[a]);delete this._map},createGeocoders:function(){var a,b,c,e=d.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),f=this._waypoints;for(this._geocoderContainer=e,this._geocoderElems=[],a=0;a<f.length;a++)b=this._createGeocoder(a),e.appendChild(b.container),this._geocoderElems.push(b);return c=d.DomUtil.create("button","",e),c.setAttribute("type","button"),c.innerHTML="+",this.options.addWaypoints?d.DomEvent.addListener(c,"click",function(){this.spliceWaypoints(f.length,0,null)},this):c.style.display="none",this.on("waypointsspliced",this._updateGeocoders),e},_createGeocoder:function(a){var b=this._waypoints.length,c=this.options.createGeocoder(a,b),e=c.input,f=this._waypoints[a];return e.setAttribute("placeholder",this.options.geocoderPlaceholder(a,b)),e.className=this.options.geocoderClass(a,b),this._updateWaypointName(a,e),e.value=f.name,d.DomEvent.addListener(e,"click",function(){this.select()},e),new d.Routing.Autocomplete(e,function(a){e.value=a.name,f.name=a.name,f.latLng=a.center,this._updateMarkers(),this._fireChanged()},this,d.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions)),c},_updateGeocoders:function(a){var b,c,d,e=[];for(d=a.index>=this._geocoderElems.length?this._geocoderContainer.lastChild:this._geocoderElems[a.index].container,b=0;b<a.added.length;b++)c=this._createGeocoder(a.index+b),this._geocoderContainer.insertBefore(c.container,d),e.push(c);for(b=a.index;b<a.index+a.nRemoved;b++)this._geocoderContainer.removeChild(this._geocoderElems[b].container);for(e.splice(0,0,a.index,a.nRemoved),[].splice.apply(this._geocoderElems,e),b=0;b<this._geocoderElems.length;b++)this._geocoderElems[b].input.placeholder=this.options.geocoderPlaceholder(b,this._waypoints.length),this._geocoderElems[b].input.className=this.options.geocoderClass(b,this._waypoints.length)},_updateGeocoder:function(a,b){var c=this._waypoints[a],d=c&&c.name?c.name:"";b&&(b.value=d)},_updateWaypointName:function(a,b,c){var d,e=this._waypoints[a];e.name=e.name||"",!e.latLng||!c&&e.name||(d=this.options.waypointNameFallback(e.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(e.latLng,67108864,function(c){e.name=c.length>0&&c[0].center.distanceTo(e.latLng)<this.options.maxGeocoderTolerance?c[0].name:d,this._updateGeocoder(a,b)},this):e.name=d,this._updateGeocoder(a,b))},_removeMarkers:function(){var a;if(this._markers)for(a=0;a<this._markers.length;a++)this._markers[a]&&this._map.removeLayer(this._markers[a]);this._markers=[]},_updateMarkers:function(){var a,b,c;if(this._map)for(this._removeMarkers(),a=0;a<this._waypoints.length;a++)this._waypoints[a].latLng?(b="function"==typeof this.options.waypointIcon?this.options.waypointIcon(a,this._waypoints[a].name,this._waypoints.length):this.options.waypointIcon,c=this._createMarker(b,a),this.options.draggableWaypoints&&this._hookWaypointEvents(c,a)):c=null,this._markers.push(c)},_createMarker:function(a,b){var c={draggable:!0};return a&&(c.icon=a),d.marker(this._waypoints[b].latLng,c).addTo(this._map)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(a,b){a.on("dragstart",function(a){this.fire("waypointdragstart",this._createWaypointEvent(b,a))},this),a.on("drag",function(a){this._waypoints[b].latLng=a.target.getLatLng(),this.fire("waypointdrag",this._createWaypointEvent(b,a))},this),a.on("dragend",function(a){this.fire("waypointdragend",this._createWaypointEvent(b,a)),this._waypoints[b].latLng=a.target.getLatLng(),this._waypoints[b].name="",this._updateWaypointName(b,this._geocoderElems&&this._geocoderElems[b].input,!0),this._fireChanged()},this)},_createWaypointEvent:function(a,b){return{index:a,latlng:b.target.getLatLng()}},dragNewWaypoint:function(a){var b;for(this._newWp={afterIndex:a.afterIndex,marker:d.marker(a.latlng).addTo(this._map),lines:[]},b=0;b<this.options.dragStyles.length;b++)this._newWp.lines.push(d.polyline([this._waypoints[a.afterIndex].latLng,a.latlng,this._waypoints[a.afterIndex+1].latLng],this.options.dragStyles[b]).addTo(this._map));this._markers.splice(a.afterIndex+1,0,this._newWp.marker),this._map.on("mousemove",this._onDragNewWp,this),this._map.on("mouseup",this._onWpRelease,this)},_onDragNewWp:function(a){var b;for(this._newWp.marker.setLatLng(a.latlng),b=0;b<this._newWp.lines.length;b++)this._newWp.lines[b].spliceLatLngs(1,1,a.latlng)},_onWpRelease:function(a){var b;for(this._map.off("mouseup",this._onWpRelease,this),this._map.off("mousemove",this._onDragNewWp,this),b=0;b<this._newWp.lines.length;b++)this._map.removeLayer(this._newWp.lines[b]);this.spliceWaypoints(this._newWp.afterIndex+1,0,a.latlng),delete this._newWp}}),d.Routing.plan=function(a,b){return new d.Routing.Plan(a,b)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Autocomplete":1}]},{},[2])(2)});